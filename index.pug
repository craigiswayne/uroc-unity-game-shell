doctype html
-
    const cache_bust_query = Date.now().toString();
html(lang='en-us')
    head
        title {{{ PRODUCT_NAME }}}
        meta(charset='utf-8')
        meta(http-equiv='Content-Type' content='text/html; charset=utf-8')
        //meta(name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0")
        link(rel='shortcut icon' href='https://ik.imagekit.io/bmp6bnlpn/uroc/uroc-logo-primary.svg?updatedAt=1750776072240')
        |
        | #if SHOW_DIAGNOSTICS
        link(rel='stylesheet' href!='<<<TemplateData/diagnostics.css>>>')
        script(src!='<<<TemplateData/diagnostics.js>>>')
        |
        | #endif
        | #if DEVELOPMENT_PLAYER
        script(src='https://cdn.jsdelivr.net/npm/lil-gui@0.20.0/dist/lil-gui.umd.min.js')
        link(href='https://cdn.jsdelivr.net/npm/lil-gui@0.20.0/dist/lil-gui.min.css' rel='stylesheet')
        link(rel='stylesheet' href=`TemplateData/shell.css?v=${cache_bust_query}`)
        script(src=`TemplateData/shell.js?v=${cache_bust_query}` defer='')
        script(type='module' src=`TemplateData/force-tool.js?v=${cache_bust_query}`)
        |
        | #else
        link(rel='stylesheet' href=`TemplateData/shell.min.css?v=${cache_bust_query}`)
        script(src=`TemplateData/shell.min.js?v=${cache_bust_query}` defer='')
        |
        | #endif
    body
        #unity-container.unity-desktop
            canvas#unity-canvas(width='{{{ WIDTH }}}' height='{{{ HEIGHT }}}' tabindex='-1')
            #unity-loading-bar
                img#unity-logo(src='https://ik.imagekit.io/bmp6bnlpn/uroc/uroc-logo-primary.svg?updatedAt=1750776072240')
                #unity-progress-bar-empty
                    #unity-progress-bar-full
            |
            | #if SHOW_DIAGNOSTICS
            |
            img#diagnostics-icon(src='TemplateData/webmemd-icon.png')
            |
            | #endif
        include views/quick_actions_menu
        include views/bet_amounts_modal
        include views/game_rules_modal
        include views/language_modal
        include views/error_modal
        include views/quit_modal
        script.
            var canvas = document.querySelector('#unity-canvas');
            function unityShowBanner(msg, type) {
                GameShell.show_error_popup(msg);
            }
            var buildUrl = 'Build';
            var loaderUrl = buildUrl + '/{{{ LOADER_FILENAME }}}';
            var config = {
                arguments: [],
                dataUrl: buildUrl + '/{{{ DATA_FILENAME }}}',
                frameworkUrl: buildUrl + '/{{{ FRAMEWORK_FILENAME }}}',
            #if USE_THREADS
                workerUrl: buildUrl + '/{{{ WORKER_FILENAME }}}',
            #endif
            #if USE_WASM
                codeUrl: buildUrl + '/{{{ CODE_FILENAME }}}',
            #endif
            #if SYMBOLS_FILENAME
                symbolsUrl: buildUrl + '/{{{ SYMBOLS_FILENAME }}}',
            #endif
                streamingAssetsUrl: 'StreamingAssets',
                companyName: {{{ JSON.stringify(COMPANY_NAME) }}},
                productName: {{{ JSON.stringify(PRODUCT_NAME) }}},
                productVersion: {{{ JSON.stringify(PRODUCT_VERSION) }}},
                showBanner: unityShowBanner,
            };
            // By default, Unity keeps WebGL canvas render target size matched with
            // the DOM size of the canvas element (scaled by window.devicePixelRatio)
            // Set this to false if you want to decouple this synchronization from
            // happening inside the engine, and you would instead like to size up
            // the canvas DOM size and WebGL render target sizes yourself.
            // config.matchWebGLToCanvasSize = false;
            // If you would like all file writes inside Unity Application.persistentDataPath
            // directory to automatically persist so that the contents are remembered when
            // the user revisits the site the next time, uncomment the following line:
            // config.autoSyncPersistentDataPath = true;
            // This autosyncing is currently not the default behavior to avoid regressing
            // existing user projects that might rely on the earlier manual
            // JS_FileSystem_Sync() behavior, but in future Unity version, this will be
            // expected to change.
            if (/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)) {
                // Mobile device style: fill the whole browser client area with the game canvas:
                var meta = document.createElement('meta');
                meta.name = 'viewport';
                meta.content = 'width=device-width, height=device-height, initial-scale=1.0, user-scalable=no, shrink-to-fit=yes';
                document.getElementsByTagName('head')[0].appendChild(meta);
                document.querySelector('#unity-container').className = 'unity-mobile';
                canvas.className = 'unity-mobile';
                // To lower canvas resolution on mobile devices to gain some
                // performance, uncomment the following line:
                // config.devicePixelRatio = 1;
            #if SHOW_DIAGNOSTICS
                    // position the diagnostics icon in the corner on the canvas
                let diagnostics_icon = document.getElementById('diagnostics-icon');
                diagnostics_icon.style.position = 'fixed';
                diagnostics_icon.style.bottom = '10px';
                diagnostics_icon.style.right = '0px';
                canvas.after(diagnostics_icon);
            #endif
            } else {
                // Desktop style: Render the game canvas in a window that can be maximized to fullscreen:
                // canvas.style.width = '{{{ WIDTH }}}px';
                // canvas.style.height = '{{{ HEIGHT }}}px';
                // canvas.style.width = (window.innerWidth / 100.0 * 90.0) + 'px';
                // canvas.style.height = (window.innerHeight / 100.0 * 90.0) + 'px';
            }
            #if BACKGROUND_FILENAME
                canvas.style.background = "url('" + buildUrl + "/{{{ BACKGROUND_FILENAME.replace(/'/g, '%27') }}}') center / cover";
            #endif
            document.querySelector('#unity-loading-bar').style.display = 'block';
            var script = document.createElement('script');
            script.src = loaderUrl;
            script.onload = () => {
                createUnityInstance(canvas, config, (progress) => {
                    document.querySelector('#unity-progress-bar-full').style.width = 100 * progress + '%';
                }).then((unityInstance) => {
                    document.querySelector('#unity-loading-bar').style.display = 'none';
                    GameShell.unityInstance = unityInstance;
                #if SHOW_DIAGNOSTICS
                    document.getElementById('diagnostics-icon').onclick = () => {
                        unityDiagnostics.openDiagnosticsDiv(unityInstance.GetMetricsInfo);
                    };
                #endif
                }).catch((message) => {
                    alert(message);
                });
            };
            document.body.appendChild(script);

